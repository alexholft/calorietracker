<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>오늘 먹은 것 칼로리 계산기</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      line-height: 1.5;
    }
    h1 {
      margin-bottom: 0.5rem;
    }
    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }
    input[type="text"], input[type="number"] {
      flex: 1;
      padding: 6px 8px;
    }
    button {
      padding: 6px 10px;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 6px;
      text-align: left;
    }
    tfoot td {
      font-weight: bold;
    }
    .total {
      margin-top: 12px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>오늘 먹은 것 칼로리 계산기</h1>
  <p>먹은 음식과 칼로리를 입력하고 <b>추가</b> 버튼을 눌러보세요.</p>

  <div class="input-row">
    <input id="food" type="text" placeholder="음식 이름 (예: 김치찌개)" />
    <input id="kcal" type="number" placeholder="칼로리 (kcal)" />
    <button id="addBtn">추가</button>
  </div>

  <button id="resetBtn">전체 초기화</button>

  <table id="listTable">
    <thead>
      <tr>
        <th>#</th>
        <th>음식</th>
        <th>칼로리 (kcal)</th>
      </tr>
    </thead>
    <tbody>
      <!-- 항목이 여기 추가됩니다 -->
    </tbody>
  </table>

  <div class="total" id="totalArea">
    총합: 0 kcal
  </div>

  <script>
    const items = [];

    const foodInput = document.getElementById('food');
    const kcalInput = document.getElementById('kcal');
    const addBtn = document.getElementById('addBtn');
    const resetBtn = document.getElementById('resetBtn');
    const listTableBody = document.querySelector('#listTable tbody');
    const totalArea = document.getElementById('totalArea');

    function render() {
      listTableBody.innerHTML = '';

      let total = 0;

      items.forEach((item, index) => {
        const tr = document.createElement('tr');

        const tdIndex = document.createElement('td');
        tdIndex.textContent = index + 1;

        const tdFood = document.createElement('td');
        tdFood.textContent = item.food;

        const tdKcal = document.createElement('td');
        tdKcal.textContent = item.kcal;

        tr.appendChild(tdIndex);
        tr.appendChild(tdFood);
        tr.appendChild(tdKcal);

        listTableBody.appendChild(tr);

        total += item.kcal;
      });

      totalArea.textContent = `총합: ${total} kcal`;
    }

    function addItem() {
      const food = foodInput.value.trim();
      const kcalValue = kcalInput.value.trim();

      if (!food) {
        alert('음식 이름을 입력해주세요.');
        return;
      }

      const kcal = parseFloat(kcalValue);
      if (Number.isNaN(kcal)) {
        alert('칼로리를 숫자로 입력해주세요.');
        return;
      }

      items.push({ food, kcal });
      foodInput.value = '';
      kcalInput.value = '';
      foodInput.focus();

      render();
    }

    addBtn.addEventListener('click', addItem);

    kcalInput.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        addItem();
      }
    });

    resetBtn.addEventListener('click', () => {
      if (!confirm('모든 기록을 초기화할까요?')) return;
      items.length = 0;
      render();
    });

    render();
  </script>
</body>
</html>
